# ä»‹ç»

## ä»€ä¹ˆæ˜¯ @ldesign/authï¼Ÿ

`@ldesign/auth` æ˜¯ LDesign è®¾è®¡ç³»ç»Ÿçš„è®¤è¯æˆæƒæ¨¡å—ï¼Œæä¾›å®Œæ•´çš„èº«ä»½è®¤è¯å’Œæˆæƒè§£å†³æ–¹æ¡ˆã€‚å®ƒæ”¯æŒä»åŸºç¡€çš„ JWT è®¤è¯åˆ°ä¼ä¸šçº§çš„ SSO å•ç‚¹ç™»å½•ã€å¤šå› ç´ è®¤è¯ç­‰é«˜çº§åŠŸèƒ½ã€‚

## ç‰¹æ€§

### ğŸ” æ ¸å¿ƒè®¤è¯åŠŸèƒ½

- **JWT è®¤è¯**: å®Œæ•´çš„ Token ç®¡ç†ï¼Œæ”¯æŒ Access Token å’Œ Refresh Token
- **è‡ªåŠ¨åˆ·æ–°**: Token è¿‡æœŸå‰è‡ªåŠ¨åˆ·æ–°ï¼Œæ— ç¼ç”¨æˆ·ä½“éªŒ
- **Session ç®¡ç†**: æ™ºèƒ½ä¼šè¯ç®¡ç†ï¼Œæ”¯æŒè¶…æ—¶æ£€æµ‹å’Œå¤šæ ‡ç­¾é¡µåŒæ­¥
- **çŠ¶æ€ç®¡ç†**: å“åº”å¼çš„è®¤è¯çŠ¶æ€ï¼Œä¾¿äºé›†æˆåˆ°å‰ç«¯æ¡†æ¶

### ğŸŒ OAuth 2.0 ç¤¾äº¤ç™»å½•

- **å†…ç½® Provider**: GitHubã€Googleã€Facebook ç­‰ä¸»æµå¹³å°
- **PKCE æ”¯æŒ**: å¢å¼ºçš„æˆæƒç æµç¨‹ï¼Œæ›´å®‰å…¨
- **è‡ªå®šä¹‰ Provider**: è½»æ¾é›†æˆä»»ä½• OAuth 2.0 æä¾›å•†
- **ç”¨æˆ·ä¿¡æ¯æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„ç”¨æˆ·ä¿¡æ¯æ ¼å¼

### ğŸ”’ é«˜çº§å®‰å…¨ç‰¹æ€§

- **å¤šå› ç´ è®¤è¯ (MFA)**: TOTPã€SMSã€é‚®ä»¶ç­‰å¤šç§æ–¹å¼
- **WebAuthn**: æ”¯æŒæŒ‡çº¹ã€Face ID ç­‰ç”Ÿç‰©è¯†åˆ«
- **è´¦æˆ·ä¿æŠ¤**: ç™»å½•å¤±è´¥é”å®šã€å¼‚å¸¸æ£€æµ‹ã€é£é™©è¯„ä¼°
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®‰å…¨äº‹ä»¶è¿½è¸ª
- **è®¾å¤‡ç®¡ç†**: è®¾å¤‡è¯†åˆ«ã€ä¿¡ä»»è®¾å¤‡ç®¡ç†

### ğŸš€ æ¡†æ¶é›†æˆ

- **Vue 3**: å®Œç¾é›†æˆï¼Œæä¾› Composables å’Œ Plugin
- **è·¯ç”±å®ˆå«**: è½»æ¾å®ç°è·¯ç”±çº§åˆ«çš„æƒé™æ§åˆ¶
- **HTTP æ‹¦æˆªå™¨**: è‡ªåŠ¨æ·»åŠ  Token åˆ°è¯·æ±‚å¤´
- **å“åº”å¼çŠ¶æ€**: åŸºäº Vue Reactivity çš„çŠ¶æ€ç®¡ç†

### ğŸ“¦ æ¨¡å—åŒ–è®¾è®¡

```typescript
// åªå¼•å…¥éœ€è¦çš„åŠŸèƒ½
import { createAuthManager } from '@ldesign/auth'
import { createOAuthManager } from '@ldesign/auth/oauth'
import { createMFAManager } from '@ldesign/auth/mfa'
import { createPasswordManager } from '@ldesign/auth/password'
```

æŒ‰éœ€å¼•å…¥ï¼Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚

## é€‚ç”¨åœºæ™¯

### Web åº”ç”¨

- SPA (å•é¡µåº”ç”¨)
- MPA (å¤šé¡µåº”ç”¨)
- PWA (æ¸è¿›å¼åº”ç”¨)

### åº”ç”¨ç±»å‹

- âœ… ä¼ä¸šåå°ç®¡ç†ç³»ç»Ÿ
- âœ… ç”µå•†å¹³å°
- âœ… ç¤¾äº¤åª’ä½“åº”ç”¨
- âœ… SaaS äº§å“
- âœ… åœ¨çº¿æ•™è‚²å¹³å°
- âœ… é‡‘èåº”ç”¨

## æ¶æ„è®¾è®¡

### æ ¸å¿ƒæ¦‚å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          AuthManager (æ ¸å¿ƒ)              â”‚
â”‚  - ç»Ÿä¸€çš„è®¤è¯å…¥å£                         â”‚
â”‚  - çŠ¶æ€ç®¡ç†                               â”‚
â”‚  - äº‹ä»¶åˆ†å‘                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚          â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚Token  â”‚ â”‚Sessionâ”‚ â”‚ Event    â”‚
â”‚Managerâ”‚ â”‚Managerâ”‚ â”‚ Emitter  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚         â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚ Storage â”‚      â”‚   HTTP     â”‚
â”‚ Manager â”‚      â”‚   Client   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—èŒè´£

#### AuthManager
ä¸­å¤®ç®¡ç†å™¨ï¼Œè´Ÿè´£ï¼š
- ç™»å½•/ç™»å‡ºæµç¨‹
- ç”¨æˆ·çŠ¶æ€ç®¡ç†
- åè°ƒå„ä¸ªå­æ¨¡å—
- äº‹ä»¶åˆ†å‘

#### TokenManager
Token ç®¡ç†ï¼Œè´Ÿè´£ï¼š
- Token å­˜å‚¨å’Œè·å–
- è‡ªåŠ¨åˆ·æ–°
- è¿‡æœŸæ£€æµ‹
- é»‘åå•ç®¡ç†

#### SessionManager
ä¼šè¯ç®¡ç†ï¼Œè´Ÿè´£ï¼š
- è¶…æ—¶æ£€æµ‹
- æ´»åŠ¨ç›‘æ§
- å¤šæ ‡ç­¾é¡µåŒæ­¥
- ä¼šè¯ä¿æŒ

#### EventEmitter
äº‹ä»¶ç³»ç»Ÿï¼Œè´Ÿè´£ï¼š
- è®¤è¯äº‹ä»¶å‘å¸ƒ
- äº‹ä»¶è®¢é˜…ç®¡ç†
- ç”Ÿå‘½å‘¨æœŸé’©å­

## è®¾è®¡åŸåˆ™

### 1. ç®€å•æ˜“ç”¨

æä¾›åˆç†çš„é»˜è®¤é…ç½®ï¼Œæœ€å°åŒ–é…ç½®å³å¯ä½¿ç”¨ï¼š

```typescript
const auth = createAuthManager(
  { autoRefresh: true },
  httpClient
)
```

### 2. ç±»å‹å®‰å…¨

å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼š

```typescript
import type { User, AuthState, LoginCredentials } from '@ldesign/auth'
```

### 3. å¯æ‰©å±•æ€§

æ”¯æŒè‡ªå®šä¹‰å®ç°å’Œæ‰©å±•ï¼š

```typescript
class CustomOAuthProvider extends BaseOAuthProvider {
  // è‡ªå®šä¹‰å®ç°
}
```

### 4. é«˜æ€§èƒ½

- ä¼˜åŒ–çš„äº‹ä»¶ç³»ç»Ÿ
- æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- æŒ‰éœ€åŠ è½½æ¨¡å—
- å‡å°‘ä¸å¿…è¦çš„è®¡ç®—

### 5. å®‰å…¨ç¬¬ä¸€

- HTTPS å¼ºåˆ¶è¦æ±‚
- Token å®‰å…¨å­˜å‚¨
- CSRF é˜²æŠ¤
- XSS é˜²æŠ¤
- å®‰å…¨çš„é»˜è®¤é…ç½®

## æµè§ˆå™¨å…¼å®¹æ€§

- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

æ”¯æŒç°ä»£æµè§ˆå™¨çš„æœ€æ–°ä¸¤ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚

## ä¾èµ–

### å¿…éœ€ä¾èµ–

```json
{
  "@ldesign/http": "workspace:*",
  "@ldesign/shared": "workspace:*"
}
```

### å¯é€‰ä¾èµ–

```json
{
  "@ldesign/cache": "workspace:*",  // ç”¨äºç¼“å­˜
  "@ldesign/crypto": "workspace:*", // ç”¨äºåŠ å¯†
  "@ldesign/router": "workspace:*", // ç”¨äºè·¯ç”±å®ˆå«
  "vue": "^3.0.0"                   // Vue é›†æˆ
}
```

## ä¸‹ä¸€æ­¥

- [å¿«é€Ÿå¼€å§‹](/guide/getting-started) - 5 åˆ†é’Ÿä¸Šæ‰‹
- [å®‰è£…æŒ‡å—](/guide/installation) - è¯¦ç»†å®‰è£…è¯´æ˜
- [æ ¸å¿ƒæ¦‚å¿µ](/guide/auth-manager) - æ·±å…¥äº†è§£æ¶æ„

## è·å–å¸®åŠ©

- ğŸ“– [API æ–‡æ¡£](/api/auth-manager)
- ğŸ’¡ [ç¤ºä¾‹ä»£ç ](/examples/)
- ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/ldesign/ldesign/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/ldesign/ldesign/discussions)

